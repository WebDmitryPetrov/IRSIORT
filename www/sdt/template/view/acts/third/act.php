<?php/** @var Act $act */$official = trim($act->official);$official = str_replace('  ', ' ', $official);$official_array = explode(' ', $official);$official_first = array_shift($official_array);$official_second = implode(' ', $official_array);$act_number = $act->number;$dogovor_date_simple = date('d.m.Y', strtotime($act->getUniversityDogovor()->date));$dogovor_date = date_of($dogovor_date_simple);$testing_date = date_of(date('d.m.Y', strtotime($act->testing_date)));if (!$act->check_date || $act->check_date == '0000-00-00') {    $document_check_date = date_of(date('d.m.Y'));    $document_check_date2 = date_of(date('d.m.Y'), 1);} //документы провереныelse {    $document_check_date = date_of(date('d.m.Y', strtotime($act->check_date)));    $document_check_date2 = date_of(date('d.m.Y', strtotime($act->check_date)), 1);}function date_of($date, $no_quotes = 0){    $date_day = substr($date, 0, 2);    $date_month = substr($date, 3, 2);    $date_year = substr($date, 6, 4);    $date_month = str_replace('01', 'Января', $date_month);    $date_month = str_replace('02', 'Февраля', $date_month);    $date_month = str_replace('03', 'Марта', $date_month);    $date_month = str_replace('04', 'Апреля', $date_month);    $date_month = str_replace('05', 'Мая', $date_month);    $date_month = str_replace('06', 'Июня', $date_month);    $date_month = str_replace('07', 'Июля', $date_month);    $date_month = str_replace('08', 'Августа', $date_month);    $date_month = str_replace('09', 'Сентября', $date_month);    $date_month = str_replace('10', 'Октября', $date_month);    $date_month = str_replace('11', 'Ноября', $date_month);    $date_month = str_replace('12', 'Декабря', $date_month);    if ($no_quotes)        $date = $date_day . ' ' . $date_month . ' ' . $date_year;    else        $date = '&laquo;' . $date_day . '&raquo; ' . $date_month . ' ' . $date_year;    return $date;}//$vuz_name = $act->getUniversity()->name; // было до 22.12.16//if (empty($act->getUniversity()->print_invoice_quoute))if (empty($act->getUniversity()->getParentedFieldValue('print_invoice_quoute'))) {    $vuz_name = $act->getUniversity()->getLegalInfo()['form'] . ' ' . $act->getUniversity()->getLegalInfo()['name_parent'];} else {    $vuz_name = $act->getUniversity()->getLegalInfo()['form'] . ' &laquo;' . $act->getUniversity()->getLegalInfo()['name_parent'] . '&raquo;';}$dogovor_num = $act->getUniversityDogovor()->number;$sum_total = sprintf('%01.2f', $act->amount_contributions);if (\SDT\logic\Prices\Nds::isNeedNDS($act)) {    $nds = new \SDT\logic\Prices\Nds($act->actDate());    $nds_header_text = ', в т.ч. НДС ' . $nds->getNdsValue() . '%';    $nds_text = ', в том числе НДС ' . $nds->getNdsValue() . '% - ' . $nds->getNdsPart($sum_total);} else $nds_header_text = $nds_text = '';$nds = new \SDT\logic\Prices\Nds($act->actDate());$sum_total2 = $nds->getNdsPart($sum_total);$sum_total2 = sprintf('%01.2f', $sum_total2);$per = $sum_total; //не трогать, это для вывода суммы$per2 = $sum_total2; //не трогать, это для вывода суммы$otvetst = $act->responsible; //ответственный за проведение тестирования$sum_total_rub = substr($sum_total, 0, (strpos($sum_total, '.')));$sum_total_kop = substr($sum_total, (strpos($sum_total, '.') + 1));$sum_total_rub2 = substr($sum_total2, 0, (strpos($sum_total2, '.')));$sum_total_kop2 = substr($sum_total2, (strpos($sum_total2, '.') + 1));?><html><script>window.print();</script><!----><head>    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">    <style>        .main_td td {            padding: 0 2pt 0 2pt !important;        }        .act_test {            font-size: 10pt;        }        .act_test_head {            font-size: 9pt;            /*padding: 0.05cm 5.4pt 0.05cm 5.4pt;*/            padding: 0.05cm 0;        }        .table_header_span {            font-size: 9.0pt;            color: #333333        }        /*table td        {            border:1px solid red !important;        }*/    </style></head><body><div style="width:180mm">    <?php    //Перевод денежных единиц в пропись    function num2str($num)    {        $nul = 'ноль';        $ten = array(            array('', 'один', 'два', 'три', 'четыре', 'пять', 'шесть', 'семь', 'восемь', 'девять'),            array('', 'одна', 'две', 'три', 'четыре', 'пять', 'шесть', 'семь', 'восемь', 'девять'),        );        $a20 = array('десять', 'одиннадцать', 'двенадцать', 'тринадцать', 'четырнадцать', 'пятнадцать', 'шестнадцать', 'семнадцать', 'восемнадцать', 'девятнадцать');        $tens = array(2 => 'двадцать', 'тридцать', 'сорок', 'пятьдесят', 'шестьдесят', 'семьдесят', 'восемьдесят', 'девяносто');        $hundred = array('', 'сто', 'двести', 'триста', 'четыреста', 'пятьсот', 'шестьсот', 'семьсот', 'восемьсот', 'девятьсот');        $unit = array( // Units            array('копейка', 'копейки', 'копеек', 1),            array('рубль', 'рубля', 'рублей', 0),            array('тысяча', 'тысячи', 'тысяч', 1),            array('миллион', 'миллиона', 'миллионов', 0),            array('миллиард', 'милиарда', 'миллиардов', 0),        );        //        list($rub, $kop) = explode('.', sprintf("%015.2f", floatval($num)));        $out = array();        if (intval($rub) > 0) {            foreach (str_split($rub, 3) as $uk => $v) { // by 3 symbols                if (!intval($v)) continue;                $uk = sizeof($unit) - $uk - 1; // unit key                $gender = $unit[$uk][3];                list($i1, $i2, $i3) = array_map('intval', str_split($v, 1));                // mega-logic                $out[] = $hundred[$i1]; # 1xx-9xx                if ($i2 > 1) $out[] = $tens[$i2] . ' ' . $ten[$gender][$i3]; # 20-99                else $out[] = $i2 > 0 ? $a20[$i3] : $ten[$gender][$i3]; # 10-19 | 1-9                // units without rub & kop                if ($uk > 1) $out[] = morph($v, $unit[$uk][0], $unit[$uk][1], $unit[$uk][2]);            } //foreach        } else $out[] = $nul;        $out[] = morph(intval($rub), $unit[1][0], $unit[1][1], $unit[1][2]); // rub        $out[] = $kop . ' ' . morph($kop, $unit[0][0], $unit[0][1], $unit[0][2]); // kop        return trim(preg_replace('/ {2,}/', ' ', join(' ', $out)));    }    //Склоняем словоформу    function morph($n, $f1, $f2, $f5)    {        $n = abs(intval($n)) % 100;        if ($n > 10 && $n < 20) return $f5;        $n = $n % 10;        if ($n > 1 && $n < 5) return $f2;        if ($n == 1) return $f1;        return $f5;    }    $asd = '-';    $dsa = '.';    $per = str_replace('-', '.', $per);    $per = str_replace(',', '.', $per);    $per = str_replace(' ', '.', $per);    $per = num2str($per);    $per2 = str_replace('-', '.', $per2);    $per2 = str_replace(',', '.', $per2);    $per2 = str_replace(' ', '.', $per2);    $per2 = num2str($per2); //Пропись на вывод    $per_1 = strtoupper(substr($per, 0, 1));    $per_2 = substr($per, 1);    $per = $per_1 . $per_2;    $per2_1 = strtoupper(substr($per2, 0, 1));    $per2_2 = substr($per2, 1);    $per2 = $per2_1 . $per2_2;    //Конец перевода денежных единиц    ?>    <!--<p align=right><u><i><b>Бланк 4</b></i></u></p>-->    <h4 style="margin-bottom: -13px;">ID:<?= $act->id ?></h4>    <p>    <table cellspacing="0" cellpadding="0" border="1" style="border-collapse:collapse;border:none;">        <tbody>        <tr>            <td width="319" valign="top" style="width:239.25pt;border:solid white 1.0pt;padding:0cm 5.4pt 0cm 5.4pt">                <div><b><span style="color:#333333; font-size:12pt">УТВЕРЖДАЮ</span></b></div>            </td>            <td width="319" valign="top" style="width:239.25pt;border:solid white 1.0pt;            border-left:none;            padding:0cm 5.4pt 0cm 5.4pt">                <div style="margin-left:72.6pt"><b><span style="color:#333333; font-size:12pt">УТВЕРЖДАЮ</span></b>                </div>                <!--<div><b><font size="1">&nbsp;</font></b></div>-->            </td>        </tr>        <tr>            <td width="319" valign="top" style="width:239.25pt;border:solid white 1.0pt;            border-top:none;            padding:0cm 5.4pt 0cm 5.4pt">                <!--<div><span style="color:#333333">__________________________</span></div>-->                <div style="ma rgin-left:72.6pt; bord er-bottom: 1px solid black;width:207px"><span                            style="color:#333333"><?= /*ACT_APPROVE_LEFT_TOP_POSITION*/                        $signer->position; ?></span></div>                <!--<div><span style="color:#333333">__________________________</span></div>-->            </td>            <td width="319" valign="top" style="width:239.25pt;border-top:none;border-left:            none;border-bottom:solid white 1.0pt;border-right:solid white 1.0pt;padding:0cm 5.4pt 0cm 5.4pt">                <div style="margin-left:72.6pt"><span style="color:#333333">Руководитель Организации</span></div>            </td>        </tr>        <tr>            <td width="319" valign="bottom" style="width:239.25pt;border:solid white 1.0pt;            border-top:none;            padding:0cm 5.4pt 0cm 5.4pt">                <div style="ma rgin-left:72.6pt; border-bo ttom: 1px solid black; width:207px;text-align:center"><span                            style="color:#333333;mar gin-left:40pt"><?= $signer->caption; ?></span></div>                <!--<div><span style="color:#333333">__________________________</span></div>-->                <div style="border-top: 1px solid black;width: 210px;">                </div>            </td>            <td width="319" valign="bottom" align=center style="width:239.25pt;border-top:none;border-left:            none;border-bottom:solid white 1.0pt;border-right:solid white 1.0pt;padding:0cm 5.4pt 0cm 5.4pt">                <div style="margin-left:72.6pt; bor der-bottom: 1px solid black"><span                            style="color:#333333"><?= $official_first ?>&nbsp;<?= $official_second ?></span></div>                <!--<div>                    <span style="color:#333333;margin-left:72.6pt">_____________________________</span>                </div>-->                <div style="border-top: 1px solid black;width: 232px;margin-left: 93px;"></div>            </td>        </tr>        <!--<tr>        <td width="319" valign="top" style="width:239.25pt;border:solid white 1.0pt;            border-top:none;            padding:0cm 5.4pt 0cm 5.4pt">            <div><span style="color:#333333">&nbsp;</span></div>        </td>        <td width="319" valign="top" align=center style="width:239.25pt;border-top:none;border-left:            none;border-bottom:solid white 1.0pt;border-right:solid white 1.0pt;padding:0cm 5.4pt 0cm 5.4pt">            <div style="margin-left:72.6pt;  border-bottom: 1px solid black"><span style="color:#333333">&nbsp;<?= $official_second ?></span></div>        </td>    </tr>-->        <tr style="height:19.55pt">            <td width="319" valign="top" style="width:239.25pt;border:solid white 1.0pt;            border-top:none;            padding:0cm 5.4pt 0cm 5.4pt;height:19.55pt">                <? /*<div><span style="color:#333333">____________________20___г.</span></div>*/ ?>                <div style="border-bottom: 1px solid black;    width: 210px; text-align: center;"><span                            style="color:#333333"><?= strtolower($document_check_date2); ?>г.</span></div>            </td>            <td width="319" valign="top" style="width:239.25pt;border-top:none;border-left:            none;border-bottom:solid white 1.0pt;border-right:solid white 1.0pt;padding:0cm 5.4pt 0cm 5.4pt;height:19.55pt">                <div style="margin-left:72.6pt"><span style="color:#333333">_______________________20___г.</span></div>            </td>        </tr>        <tr style="height:19.55pt">            <td width="319" valign="top" style="width:239.25pt;border:solid white 1.0pt;            border-top:none;            padding:0cm 5.4pt 0cm 5.4pt;height:19.55pt">                <div style="margin-left:62.6pt"><span                            style="fon t-size:14.0pt;color:#333333;f ont-weight:bold; ">М.П.</span></div>            </td>            <td width="319" valign="top" style="width:239.25pt;border-top:none;border-left:            none;border-bottom:solid white 1.0pt;border-right:solid white 1.0pt;padding:0cm 5.4pt 0cm 5.4pt;height:19.55pt">                <div style="margin-left:138.6pt"><span                            style="fo nt-size:14.0pt;color:#333333;fo nt-weight:bold; ">М.П.</span></div>            </td>        </tr>        </tbody>    </table>    </p>    <!--<br>-->    <!--<div>&nbsp;</div>-->    <!--<div align=center><b><span style="font-size:12.0pt;color:#333333">АКТ О ПРОВЕДЕНИИ ТЕСТИРОВАНИЯ<br>ПО РУССКОМУ ЯЗЫКУ КАК ИНОСТРАННОМУ № <?php echo $act_number; ?>-->    <? if ($act->test_level_type_id == 1) { ?>        <div align=center><b><span style="font-size:12.0pt;color:#333333">АКТ</b></span></div>        <div align=center><span style="font-size:12.0pt;color:#333333">О ПРОВЕДЕНИИ ТЕСТОВОЙ СЕССИИ</span></div>        <div align=center><span style="font-size:12.0pt;color:#333333">ПО РУССКОМУ ЯЗЫКУ КАК ИНОСТРАННОМУ</span></div>    <? } else { ?>        <div align=center><span style="font-size:15.0pt;color:#333333"><b>Акт о проведении экзаменационной сессии по русскому языку,</b></span>        </div>        <div align=center><span                    style="font-size:15.0pt;color:#333333"><b>истории России и основам законодательства РФ</b></span>        </div>    <? } ?>    <!--<br>-->    <!--<div align=center><span style="font-size:12.0pt;color:#333333">Настоящий акт составлен между <?= TEXT_HEADCENTER_LONG_TP_PRINT_ACT_NEW ?>  (далее по тексту «<?= TEXT_HEADCENTER_SHORT_IP ?>»)<br>и <u><?= $vuz_name; ?></u><br>(далее по тексту «Организация») к Договору № <u><?= $dogovor_num; ?></u>от    <u><?= strtolower($dogovor_date); ?>г.</u><br>(далее по тексту «Договор) о нижеследующем:</span></div>-->    <div align=center><span                style="font-size:12.0pt;color:#333333;text-align:center">Настоящий акт составлен между <?= TEXT_HEADCENTER_LONG_TP_PRINT_ACT_NEW ?>            (далее по тексту «<?= TEXT_HEADCENTER_SHORT_IP ?>»)и<br><u><?= $vuz_name; ?></u><br>(далее по тексту «Организация») к Договору № <u><?= $dogovor_num; ?></u> от    <u><?= strtolower($dogovor_date); ?>г.</u><br>(далее по тексту «Договор) о нижеследующем:<b></b></span></div>    <div align="center" style="text-align:center"><b>&nbsp;</b></div>    <?    $show_free = Reexam_config::isShowInAct($act->test_level_type_id); //отображать ли "из них бесплатно"    if ($act->test_level_type_id == 1) {        $act_table_type = 'act_table_type_1.php';        $test_session_name = 'тестовая';        $session_type = 'тестовой ';        $responsible_for = 'тестирования';    } else {        $act_table_type = 'act_table_type_2.php';        $test_session_name = 'экзаменационная';        $session_type = '';        $responsible_for = 'экзамена';    }    ?>    <div style="margin-left:18.0pt;text-align:justify;text-indent:-18.0pt;"><span style="font-size:12.0pt;color:#333333"><b>1.</b><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span                style="font-size:12.0pt;color:#333333">В соответствии с Договором <u><?= strtolower($testing_date); ?>                г.</u> проведена <?= $test_session_name; ?> сессия:    </div>    <!--<br>-->    <!--<div style="text-align:justify;height:6px">&nbsp;</div>-->    <?    require($act_table_type);    ?>    <div style="text-align:justify"><i>&nbsp;</i></div>    <div style="text-align:justify"><span style="font-size:12.0pt;color:#333333;">		Все документы по проведению указанной <?= $session_type; ?>сессии переданы в <?= TEXT_HEADCENTER_SHORT_IP ?>.	<br>	Документы проверены <?= strtolower($document_check_date); ?>г.    <br>	<b>2.</b> Стоимость услуг <?= TEXT_HEADCENTER_SHORT_IP ?> при проведении вышеуказанной <?= $session_type; ?>сессии составляет	<nobr><b><u><?= $sum_total_rub; ?></u>  <i>руб.</i> <u><?= $sum_total_kop; ?></u> <i>коп.</i> </b></nobr>	(<u><?= $per; ?></u>)<?= $nds_text ?>.		</span>    </div>    <div style="text-align:justify"><span style="font-size:12.0pt;color:#333333">	<b>3.</b> Указанная сумма подлежит перечислению в <?= TEXT_HEADCENTER_SHORT_IP ?> в сроки, установленные Договором.		</span></div>    <div style="text-align:justify"><span style="font-size:12.0pt;color:#333333"><b>4.</b> Организация не имеет претензий к <?= TEXT_HEADCENTER_SHORT_IP ?> по объему и качеству оказанных услуг при проведении вышеуказанной <?= $session_type; ?>    сессии.</span></div>    <div style="text-align:justify"><span style="font-size:12.0pt;color:#333333"><b>5.</b> Настоящий Акт составлен в двух экземплярах по одному для каждой из сторон.</span></div>    <div style="text-align:justify"><span style="font-size:12.0pt;color:#333333">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</span></div>    <table border=0>        <tr>            <td style="font-size:12.0pt;color:#333333;width:10mm"></td>            <td align=center colspan=3 style="font-size:11.0pt; font-family: tahoma;color:#333333;width:85mm;"><i>                    Ответственный за проведение                    <br>                    <?= $responsible_for; ?> от <?= TEXT_HEADCENTER_SHORT_IP ?>                    <br><br>                </i></td>            <td width=120px>&nbsp;</td>            <td align=center colspan=3                style="font-size:11.0pt; font-family: tahoma; color:#333333; vertical-align:top;width:85mm;"><i>                    Ответственный за проведение                    <br>                    <?= $responsible_for; ?> от Организации                    <br><br>                </i></td>        </tr>        <!--вариант 1-->        <tr>            <td></td>            <td style="border-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;width:30mm">                <i>&nbsp;</i></td>            <td style="border-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;width:45mm ">                <i>/&nbsp;</i></td>            <td style="bord er-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;"><i>/</i>            </td>            <td></td>            <td style="border-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;width:30mm;text-align:right">                <i>&nbsp;</i></td>            <td style="border-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;width:50mm;te xt-align:center ">                <i>/&nbsp;<?= $otvetst; ?></i></td>            <td style="bord er-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;w idth:1mm;">                <i>/</i></td>        </tr>        <!-- вариант 2	<tr><td></td>        <td style="border-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;width:30mm"><i>&nbsp;</i></td>        <td style="border-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;width:45mm "><i>/&nbsp;</i></td>        <td style="bord er-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;"><i>/</i></td>        <td></td>        <td style="border-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;width:30mm;text-align:right"><i>&nbsp;</i></td>        <td style="border-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;w 	idth:50mm;text-align:center "><i>/&nbsp;<nobr><?= $otvetst; ?></nobr></i></td>        <td style="bord er-bottom:0.5pt solid black;font-size:12.0pt; color:#333333; vertical-align:top;width:1mm;"><i>/</i></td>    </tr>-->    </table></div></body></html>